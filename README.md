# Request mapping adaptation of the [Emission](https://github.com/MoodMinds/emission) and [Traverse Streams Traversable](https://github.com/MoodMinds/traverse-streams-traversable) return types when used in [Spring](https://spring.io)'s @RestController

Adaptation of the [Emission](https://github.com/MoodMinds/emission)'s `Emittable` and
[Traverse Streams Traversable](https://github.com/MoodMinds/traverse-streams-traversable)'s `Traversable`
in Spring's `RequestMappingHandlerAdapter` for handling as return values in @RestController in Servlet non-reactive context.

## Key Notes

It's worth mentioning that when you return `Emittable` or `Traversable`, an automatic asynchronous traversal processing
approach is applied. The traversal seamlessly operates as a task executed by a `TaskExecutor`. This is particularly useful
for handling large response emissions, such as those generated by return types like `ResponseBodyEmitter`. To enable this
functionality, the presence of a registered `TaskExecutor` is necessary.

## Usage

Ensure a `TaskExecutor` is present in Spring Application Context. Include the provided `TraverseSupportMappingHandlerAdaptation`
in your Spring config and be able to use `Emittable` and `Traversable` as return value in methods marked with `@RequestMapping` annotation.
The returning values will be processed asynchronously with the Spring's `TaskExecutor` under the hood.

```java
import org.moodminds.emission.Emittable;
import org.moodminds.traverse.Traversable;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import static org.moodminds.emission.Emittable.emittable;
import static org.moodminds.traverse.Traversable.traversable;

import static org.springframework.http.MediaType.TEXT_EVENT_STREAM_VALUE;

@RestController
public class StreamController {

    @GetMapping(path = "/emission", produces = TEXT_EVENT_STREAM_VALUE)
    public Emittable<String, Exception> emission() {
        return emittable(traversable());
    }

    @GetMapping(path = "/traverse", produces = TEXT_EVENT_STREAM_VALUE)
    public Traversable<String, Exception> traverse() {
        return traversable();
    }
}
```

## Maven configuration

Artifacts can be found on [Maven Central](https://search.maven.org/) after publication.

```xml
<dependency>
    <groupId>org.moodminds.emission</groupId>
    <artifactId>emission-spring-webmvc</artifactId>
    <version>${version}</version>
</dependency>
```

## Building from Source

You may need to build from source to use **Emission Spring Web MVC** (until it is in Maven Central) with Maven and JDK 1.8 at least.

## License
This project is going to be released under version 2.0 of the [Apache License][l].

[l]: https://www.apache.org/licenses/LICENSE-2.0